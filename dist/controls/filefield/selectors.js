'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.value = exports.files = undefined;

var _reselect = require('reselect');

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var filesSelector = function filesSelector(state, props) {
  return state.files;
};

var multipleSelector = function multipleSelector(state, props) {
  return props.multiple;
};

var files = exports.files = (0, _reselect.createSelector)(filesSelector, function (files) {
  return files.sort(function (fileA, fileB) {
    var aIsImage = (fileA.contentType || fileA.asset.content_type).match(/image/) !== null;
    var bIsImage = (fileB.contentType || fileB.asset.content_type).match(/image/) !== null;
    if (aIsImage && !bIsImage) return -1;
    if (bIsImage && !aIsImage) return 1;
    return 0;
  });
});

var value = exports.value = (0, _reselect.createSelector)(files, multipleSelector, function (files, multiple) {
  var assetIds = files.filter(function (file) {
    return !_lodash2.default.isNil(file.asset);
  }).map(function (file) {
    return file.asset.id;
  });
  return multiple ? assetIds : assetIds[0];
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVua25vd24iXSwibmFtZXMiOlsiZmlsZXNTZWxlY3RvciIsInN0YXRlIiwicHJvcHMiLCJmaWxlcyIsIm11bHRpcGxlU2VsZWN0b3IiLCJtdWx0aXBsZSIsInNvcnQiLCJmaWxlQSIsImZpbGVCIiwiYUlzSW1hZ2UiLCJjb250ZW50VHlwZSIsImFzc2V0IiwiY29udGVudF90eXBlIiwibWF0Y2giLCJiSXNJbWFnZSIsInZhbHVlIiwiYXNzZXRJZHMiLCJmaWx0ZXIiLCJfIiwiaXNOaWwiLCJmaWxlIiwibWFwIiwiaWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7Ozs7O0FBRUEsSUFBTUEsZ0JBQWdCLFNBQWhCQSxhQUFnQixDQUFDQyxLQUFELEVBQVFDLEtBQVI7QUFBQSxTQUFrQkQsTUFBTUUsS0FBeEI7QUFBQSxDQUF0Qjs7QUFFQSxJQUFNQyxtQkFBbUIsU0FBbkJBLGdCQUFtQixDQUFDSCxLQUFELEVBQVFDLEtBQVI7QUFBQSxTQUFrQkEsTUFBTUcsUUFBeEI7QUFBQSxDQUF6Qjs7QUFFTyxJQUFNRix3QkFBUSw4QkFDbkJILGFBRG1CLEVBRW5CLFVBQUNHLEtBQUQ7QUFBQSxTQUFXQSxNQUFNRyxJQUFOLENBQVcsVUFBQ0MsS0FBRCxFQUFRQyxLQUFSLEVBQWtCO0FBQ3RDLFFBQU1DLFdBQVcsQ0FBQ0YsTUFBTUcsV0FBTixJQUFxQkgsTUFBTUksS0FBTixDQUFZQyxZQUFsQyxFQUFnREMsS0FBaEQsQ0FBc0QsT0FBdEQsTUFBbUUsSUFBcEY7QUFDQSxRQUFNQyxXQUFXLENBQUNOLE1BQU1FLFdBQU4sSUFBcUJGLE1BQU1HLEtBQU4sQ0FBWUMsWUFBbEMsRUFBZ0RDLEtBQWhELENBQXNELE9BQXRELE1BQW1FLElBQXBGO0FBQ0EsUUFBSUosWUFBWSxDQUFDSyxRQUFqQixFQUEyQixPQUFPLENBQUMsQ0FBUjtBQUMzQixRQUFJQSxZQUFZLENBQUNMLFFBQWpCLEVBQTJCLE9BQU8sQ0FBUDtBQUMzQixXQUFPLENBQVA7QUFDRCxHQU5VLENBQVg7QUFBQSxDQUZtQixDQUFkOztBQVdBLElBQU1NLHdCQUFRLDhCQUNuQlosS0FEbUIsRUFFbkJDLGdCQUZtQixFQUduQixVQUFDRCxLQUFELEVBQVFFLFFBQVIsRUFBcUI7QUFDbkIsTUFBTVcsV0FBV2IsTUFBTWMsTUFBTixDQUFhO0FBQUEsV0FBUSxDQUFDQyxpQkFBRUMsS0FBRixDQUFRQyxLQUFLVCxLQUFiLENBQVQ7QUFBQSxHQUFiLEVBQTJDVSxHQUEzQyxDQUErQztBQUFBLFdBQVFELEtBQUtULEtBQUwsQ0FBV1csRUFBbkI7QUFBQSxHQUEvQyxDQUFqQjtBQUNBLFNBQU9qQixXQUFXVyxRQUFYLEdBQXNCQSxTQUFTLENBQVQsQ0FBN0I7QUFDRCxDQU5rQixDQUFkIiwiZmlsZSI6InVua25vd24iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVTZWxlY3RvciB9IGZyb20gJ3Jlc2VsZWN0J1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJ1xuXG5jb25zdCBmaWxlc1NlbGVjdG9yID0gKHN0YXRlLCBwcm9wcykgPT4gc3RhdGUuZmlsZXNcblxuY29uc3QgbXVsdGlwbGVTZWxlY3RvciA9IChzdGF0ZSwgcHJvcHMpID0+IHByb3BzLm11bHRpcGxlXG5cbmV4cG9ydCBjb25zdCBmaWxlcyA9IGNyZWF0ZVNlbGVjdG9yKFxuICBmaWxlc1NlbGVjdG9yLFxuICAoZmlsZXMpID0+IGZpbGVzLnNvcnQoKGZpbGVBLCBmaWxlQikgPT4ge1xuICAgIGNvbnN0IGFJc0ltYWdlID0gKGZpbGVBLmNvbnRlbnRUeXBlIHx8IGZpbGVBLmFzc2V0LmNvbnRlbnRfdHlwZSkubWF0Y2goL2ltYWdlLykgIT09IG51bGxcbiAgICBjb25zdCBiSXNJbWFnZSA9IChmaWxlQi5jb250ZW50VHlwZSB8fCBmaWxlQi5hc3NldC5jb250ZW50X3R5cGUpLm1hdGNoKC9pbWFnZS8pICE9PSBudWxsXG4gICAgaWYgKGFJc0ltYWdlICYmICFiSXNJbWFnZSkgcmV0dXJuIC0xXG4gICAgaWYgKGJJc0ltYWdlICYmICFhSXNJbWFnZSkgcmV0dXJuIDFcbiAgICByZXR1cm4gMFxuICB9KVxuKVxuXG5leHBvcnQgY29uc3QgdmFsdWUgPSBjcmVhdGVTZWxlY3RvcihcbiAgZmlsZXMsXG4gIG11bHRpcGxlU2VsZWN0b3IsXG4gIChmaWxlcywgbXVsdGlwbGUpID0+IHtcbiAgICBjb25zdCBhc3NldElkcyA9IGZpbGVzLmZpbHRlcihmaWxlID0+ICFfLmlzTmlsKGZpbGUuYXNzZXQpKS5tYXAoZmlsZSA9PiBmaWxlLmFzc2V0LmlkKVxuICAgIHJldHVybiBtdWx0aXBsZSA/IGFzc2V0SWRzIDogYXNzZXRJZHNbMF1cbiAgfVxuKVxuIl19